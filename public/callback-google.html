<!DOCTYPE html>
<html>
<head>
  <title>Connexion Google</title>
</head>
<body>
  <script>
    // ğŸ”’ SÃ©curitÃ© : autorise seulement ton propre domaine
    const allowedOrigin = "https://projet-de-soutenance.netlify.app";

    // ğŸ” RÃ©cupÃ¨re le token dans l'URL
    const urlParams = new URLSearchParams(window.location.search);
    const token = urlParams.get('token');

    if (window.opener && token) {
      // ğŸ”„ Renvoie le token au parent (page qui a ouvert cette popup)
      window.opener.postMessage({ type: 'google-auth', token }, allowedOrigin);
      window.close(); // ğŸ” Ferme la popup automatiquement
    } else {
      document.body.innerText = "Token manquant ou pas de fenÃªtre parente.";
    }
  </script>
</body>
</html>
